%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Content: Main file of thesis template (master/enginering).
%  Author: Tomasz Kubik <tomasz.kubik@pwr.edu.pl>
%  Date: 9 Feb 2021
%  Version: 0.5
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[a4paper,onecolumn,oneside,12pt,extrafontsizes]{memoir}
% In oder to prepare the manuscript for archives (2x1, double printed) you can:
% a) produce normal pdf, then convert it to pdf with two pages on one phisical page (solution suggested)
%
%   This can be done by:
%   - printing from Adobe Acrobat Reader with option "Multiple"
%   - using psutils
%
%      Windows (assuming that you have MiKTeX installed with the package pakiet miktex-psutils-bin-x64-2.9):
%        "c:\Program Files\MiKTeX 2.9\miktex\bin\x64\pdf2ps.exe" Dyplom.pdf Dyplom.ps
%        "c:\Program Files\MiKTeX 2.9\miktex\bin\x64\psnup.exe" -2 Dyplom.ps Dyplom2.ps
%        "c:\Program Files\MiKTeX 2.9\miktex\bin\x64\ps2pdf.exe" Dyplom2.ps Dyplom2.pdf
%        Del Dyplom2.ps Dyplom.ps
%
%     Linux:
%        pdf2ps Dyplom.pdf - | psnup -2 | ps2pdf - Dyplom2.pdf
%
%
% b) produce 'reduced' pdf by settning smaller fonts in the document class definition (it changes the formating thus it is not suggested)
%
%   Use of the following commands instead of original one:
%   \documentclass[a4paper,onecolumn,twoside,10pt]{memoir} 
%   \renewcommand{\normalsize}{\fontsize{8pt}{10pt}\selectfont}

\usepackage[cp1250]{inputenc} % Use it if you work with cp1250 file encoding
%\usepackage[utf8]{inputenc} % Switch to if if you work with UTF8 file encoding
\usepackage[T1]{fontenc}
\usepackage[polish,english]{babel} % The order of attributes matters (for thesis in english then attribute 'english' must be at the end)
%\DisemulatePackage{setspace}
\usepackage{setspace}
\usepackage{tabularx}
\usepackage{color,calc}
%\usepackage{soul} % packege with commands for text highliting (rather not required)

\usepackage{ebgaramond} % package with garamond font (required on the title page)

%% Accorging to the rules the main font of the thesis should be Times.
%% In order to achieve it we use tgtermes font that offers shapes: normal, bold, italic, italic bold.
%% There is no slanted shape.
%% If you use slanted font in the text (typing \textsl{} command), then LaTeX will substitute it with a standard font giving you a warning.
%% Additionally tgtermes works for the running text. All maths (formulas, equations) will be rendered with a default font for math.
%% If you with to change the font for math, you must to do it yourself.

%% After installation of tgtermes package there might be a need to update font and mapping information 
%% This can be don by running the following commands (as administrator)
%% initexmf --admin --update-fndb
%% initexmf --admin --mkmaps


\usepackage{tgtermes}   
\renewcommand*\ttdefault{txtt}

\usepackage{multicol} % Package for typing in multicolums
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Packages for editing tables
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{tabularx}
% Use tabularx package only. Other packages left untouched !!!
% Thesis for sure can be edited without using them.
%\usepackage{longtable}
%\usepackage{ltxtable}
%\usepackage{tabulary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Package for inserting source code fragments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{listings} %
\usepackage{xpatch}
\makeatletter
\xpatchcmd\l@lstlisting{1.5em}{0em}{}{}
\makeatother
% Package delivers lstlisting environment which is highly configurable.
% Listings can be configured individually or globally, with the use of \lstset{} command 
% Is is strongly suggested to renred source code using typewriter font family \ttfamily
% More over, due to the longiness of sources, even after removing unnecessary parts, the font should be lowered. 
% Thus use \small (for short fragments) and \footnotesize (for longer framents)

\lstset{
  basicstyle=\small\ttfamily, % or basicstyle=\footnotesize\ttfamily
  %%columns=fullflexible,
	%%showstringspaces=false,
	%%showspaces=false,
  breaklines=true,
  postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space}, 
  %%numbers=left,  % this and following lines are related to numbering and its rendering
  %%firstnumber=1, 
  %%numberfirstline=true, 
	%%xleftmargin=17pt,
  %%framexleftmargin=17pt,
  %%framexrightmargin=5pt,
  %%framexbottommargin=4pt,
	belowskip=.5\baselineskip
}

% If the edited file is not in cp1250 encoding, then there is a problem with Polish characters in the inserted code.
% Therefore, when working with files in UTF-8 encoding, you need to declare the mapping as follows (just unmark to use).
% Unfortunately, when this mapping is applied, there may be problems with syntax highlighting (see further comments). 
%%\lstset{literate=%-
%%{¹}{{\k{a}}}1 {æ}{{\'c}}1 {ê}{{\k{e}}}1 {³}{{\l{}}}1 {ñ}{{\'n}}1 {ó}{{\'o}}1 {œ}{{\'s}}1 {¿}{{\.z}}1 {Ÿ}{{\'z}}1 {¥}{{\k{A}}}1 {Æ}{{\'C}}1 {Ê}{{\k{E}}}1 {£}{{\L{}}}1 {Ñ}{{\'N}}1 {Ó}{{\'O}}1 {Œ}{{\'S}}1 {¯}{{\.Z}}1 {}{{\'Z}}1 
    %%{Ö}{{\"O}}1
    %%{Ä}{{\"A}}1
    %%{Ü}{{\"U}}1
    %%{ß}{{\ss}}1
    %%{ü}{{\"u}}1
    %%{ä}{{\"a}}1
    %%{ö}{{\"o}}1
    %%{~}{{\textasciitilde}}1
		%%{—}{{{\textemdash} }}1
%%}%{\ \ }{{\ }}1}


%% lstlisting allows you to style the syntax highlighting of selected languages.
%% This works by defining keywords and rules on how to display them.
%% Because it is a simple mechanism, it is sometimes difficult to achieve the quality as in IDE tools.
%% However, in most cases the results are satisfactory.
%% \ lstloadlanguages {% Check Documentation for further languages ... 
%%C,
%%C++,
%%csh,
%%Java
%%}

%% lstlisting supports some of the most popular languages by default.
%% Other languages must be added. Examples of definitions of languages and styles are given below. 

\definecolor{lightgray}{rgb}{.9,.9,.9}
\definecolor{darkgray}{rgb}{.4,.4,.4}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}
\definecolor{javared}{rgb}{0.6,0,0} % for strings
\definecolor{javagreen}{rgb}{0.25,0.5,0.35} % comments
\definecolor{javapurple}{rgb}{0.5,0,0.35} % keywords
\definecolor{javadocblue}{rgb}{0.25,0.35,0.75} % javadoc
\definecolor{gold}{RGB}{255,223,0} % javadoc
 
\lstdefinelanguage{JavaScript}{ 
	keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
	keywordstyle=\color{blue}\bfseries,
	ndkeywords={class, export, boolean, throw, implements, import, this},
	ndkeywordstyle=\color{darkgray}\bfseries,
	identifierstyle=\color{black},
	sensitive=false,
	comment=[l]{//},
	morecomment=[s]{/*}{*/},
	commentstyle=\color{purple}\ttfamily,
	stringstyle=\color{red}\ttfamily,
	morestring=[b]',
	morestring=[b]"
}
\lstdefinestyle{JavaScriptStyle}{
	language=JavaScript,
	commentstyle=\color{javagreen}, % unfortunately, if keywords appear in the comment line, they will be colored 
	backgroundcolor=,%\color{lightgray}, % you can set a background color, but it is not recommended 
	extendedchars=true,
	basicstyle=\footnotesize\ttfamily,
	showstringspaces=false,
	showspaces=false,
	numbers=none,%left,
	numberstyle=\footnotesize,
	numbersep=9pt,
	tabsize=2,
	breaklines=true,
	showtabs=false,
	captionpos=t
}

\lstdefinestyle{JavaStyle}{
basicstyle=\footnotesize\ttfamily,
keywordstyle=\color{javapurple}\bfseries,
stringstyle=\color{javared},
commentstyle=\color{javagreen},
morecomment=[s][\color{javadocblue}]{/**}{*/},
numbers=none,%left,
numberstyle=\tiny\color{black},
stepnumber=2,
numbersep=10pt,
tabsize=4,
showspaces=false,
showstringspaces=false,
captionpos=t
}

\definecolor{pblue}{rgb}{0.13,0.13,1}
\definecolor{pgreen}{rgb}{0,0.5,0}
\definecolor{pred}{rgb}{0.9,0,0}
\definecolor{pgrey}{rgb}{0.46,0.45,0.48}
\definecolor{dark-grey}{rgb}{0.4,0.4,0.4}
% json style
\newcommand\JSONnumbervaluestyle{\color{blue}}
\newcommand\JSONstringvaluestyle{\color{red}}

\newif\ifcolonfoundonthisline

\makeatletter

\lstdefinestyle{json-style}  
{
	showstringspaces    = false,
	keywords            = {false,true},
	alsoletter          = 0123456789.,
	morestring          = [s]{"}{"},
	stringstyle         = \ifcolonfoundonthisline\JSONstringvaluestyle\fi,
	MoreSelectCharTable =%
	\lst@DefSaveDef{`:}\colon@json{\processColon@json},
	basicstyle          = \footnotesize\ttfamily,
	keywordstyle        = \ttfamily\bfseries,
	numbers				= left, % comment out if numbering is not needed
	numberstyle={\footnotesize\ttfamily\color{dark-grey}},
	xleftmargin			= 2em % comment out if numbering is not needed
}

\newcommand\processColon@json{%
	\colon@json%
	\ifnum\lst@mode=\lst@Pmode%
	\global\colonfoundonthislinetrue%
	\fi
}

\lst@AddToHook{Output}{%
	\ifcolonfoundonthisline%
	\ifnum\lst@mode=\lst@Pmode%
	\def\lst@thestyle{\JSONnumbervaluestyle}%
	\fi
	\fi
	\lsthk@DetectKeywords% 
}

\lst@AddToHook{EOL}%
{\global\colonfoundonthislinefalse}

\makeatother

%%\definecolor{red}{rgb}{0.6,0,0} % for strings
%%\definecolor{blue}{rgb}{0,0,0.6}
%%\definecolor{green}{rgb}{0,0.8,0}
%%\definecolor{cyan}{rgb}{0.0,0.6,0.6}
%%
%%\lstdefinestyle{sqlstyle}{
%%language=SQL,
%%basicstyle=\footnotesize\ttfamily, 
%%numbers=left, 
%%numberstyle=\tiny, 
%%numbersep=5pt, 
%%tabsize=2, 
%%extendedchars=true, 
%%breaklines=true, 
%%showspaces=false, 
%%showtabs=true, 
%%xleftmargin=17pt,
%%framexleftmargin=17pt,
%%framexrightmargin=5pt,
%%framexbottommargin=4pt,
%%keywordstyle=\color{blue}, 
%%commentstyle=\color{green}, 
%%stringstyle=\color{red}, 
%%}
%%

\definecolor{bluekeywords}{rgb}{0.13,0.13,1}
\definecolor{greencomments}{rgb}{0,0.5,0}
\definecolor{redstrings}{rgb}{0.9,0,0}
	
\definecolor{base0}{RGB}{131,148,150}
\definecolor{base01}{RGB}{88,110,117}
\definecolor{base2}{RGB}{238,232,213}
\definecolor{sgreen}{RGB}{133,153,0}
\definecolor{sblue}{RGB}{38,138,210}
\definecolor{scyan}{RGB}{42,161,151}
\definecolor{smagenta}{RGB}{211,54,130}



\newcommand\symbolstyle{\color{black}}
\newcommand\digitstyle{\color{smagenta}}
\makeatletter
\newcommand{\ProcessDigit}[1]
{%
  \ifnum\lst@mode=\lst@Pmode\relax%
   {\digitstyle #1}%
  \else
    #1%
  \fi
}
\makeatother

\lstdefinestyle{sharpcstyle}{
language=[Sharp]C,
basicstyle=\footnotesize\ttfamily, 
numbers=left, 
numberstyle=\tiny, 
numbersep=5pt, 
tabsize=2, 
extendedchars=true, 
breaklines=true, 
showspaces=false, 
showtabs=true, 
xleftmargin=17pt,
framexleftmargin=17pt,
framexrightmargin=5pt,
framexbottommargin=4pt,
morecomment=[l]{//}, %use comment-line-style!
morecomment=[s]{/*}{*/}, %for multiline comments
showstringspaces=false, 
morekeywords={partial, var, value, get, set},
emph={int,char,double,float,unsigned,void,bool},
emphstyle={\color{sblue}},
%%morekeywords={  abstract, event, new, struct,
                %%as, explicit, null, switch,
                %%base, extern, object, this,
                %%bool, false, operator, throw,
                %%break, finally, out, true,
                %%byte, fixed, override, try,
                %%case, float, params, typeof,
                %%catch, for, private, uint,
                %%char, foreach, protected, ulong,
                %%checked, goto, public, unchecked,
                %%class, if, readonly, unsafe,
                %%const, implicit, ref, ushort,
                %%continue, in, return, using,
                %%decimal, int, sbyte, virtual,
                %%default, interface, sealed, volatile,
                %%delegate, internal, short, void,
                %%do, is, sizeof, while,
                %%double, lock, stackalloc,
                %%else, long, static,
                %%enum, namespace, string},
  commentstyle=\color{greencomments},
  keywordstyle=\color{bluekeywords},
  stringstyle=\color{redstrings},
  extendedchars=true,
	%
	%%classoffset=1, % starting new class
  %%otherkeywords={>,<,.,;,-,!,=,~},
  %%morekeywords={>,<,.,;,-,!,=,~},
  %%keywordstyle=\color{weborange},
  %%classoffset=0,
	literate=
    %%%{0}{{{\ProcessDigit{0}}}}1
    %%%{1}{{{\ProcessDigit{1}}}}1
    %%%{2}{{{\ProcessDigit{2}}}}1
    %%%{3}{{{\ProcessDigit{3}}}}1
    %%%{4}{{{\ProcessDigit{4}}}}1
    %%%{5}{{{\ProcessDigit{5}}}}1
    %%%{6}{{{\ProcessDigit{6}}}}1
    %%%{7}{{{\ProcessDigit{7}}}}1
    %%%{8}{{{\ProcessDigit{8}}}}1
    %%%{9}{{{\ProcessDigit{9}}}}1
    {\}}{{{\symbolstyle{\}}}}}1
    {\{}{{{\symbolstyle{\{}}}}1
    {(}{{{\symbolstyle{(}}}}1
    {)}{{{\symbolstyle{)}}}}1
    {=}{{{\symbolstyle{$=$}}}}1
    {;}{{{\symbolstyle{$;$}}}}1
    {>}{{{\symbolstyle{$>$}}}}1
    {<}{{{\symbolstyle{$<$}}}}1
    {\%}{{{\symbolstyle{$\%$}}}}1,
}


% Redefinition of insertion of List of Listings into the document.
% Without redefinition, the heading of this list appeared at a different height than the headings of other lists. 
%%%\makeatletter
%%%%\renewcommand*{\l@lstlisting}[2]{\@dottedtocline{1}{0em}{2.3em}{#1}{#2}}
%%%\g@addto@macro\insertchapterspace{\addtocontents{lol}{\protect\addvspace{10pt}}}
%%%\renewcommand*{\l@lstlisting}{\@dottedtocline{1}{0em}{2.3em}}
%%%\makeatother

\makeatletter % vertical spaces in lists berofe chapters
\renewcommand*{\insertchapterspace}{%
  \addtocontents{lof}{\protect\addvspace{5pt}}%
  \addtocontents{lot}{\protect\addvspace{5pt}}%
	\addtocontents{toc}{\protect\addvspace{5pt}} %
  \addtocontents{lol}{\protect\addvspace{5pt}}}
\makeatother 

\newcommand{\listingcaption}[1]% added to place caption above listing in twocolumns
{%
\vspace*{\abovecaptionskip}\small 
\refstepcounter{lstlisting}\hfill%
Listing \thelstlisting: #1\hfill%\hfill%
\addcontentsline{lol}{lstlisting}{\protect\numberline{\thelstlisting}#1}
}%

% Redefinitions of labels for tables, figures and bibliography 
%\AtBeginDocument{% 
        \addto\captionsenglish{% 
        \renewcommand{\lstlistlistingname}{List of listings}%
}%} 
\newlistof{lstlistoflistings}{lol}{\lstlistlistingname}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Settings related to the autmatic document typesetting
%% and floats placements
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\hyphenpenalty=10000		% do not break words too often
\clubpenalty=10000      % penalty for orphans
\widowpenalty=10000  % do not left widows
%\brokenpenalty=10000		% dont break words between pages - commented out because interfere with line breaking in lstlisting
%\exhyphenpenalty=999999		% dont break word with dash - commented out because interfere with line breaking in lstlisting
\righthyphenmin=3			% break at min 3 characters

%\tolerance=4500
%\pretolerance=250
%\hfuzz=1.5pt
%\hbadness=1450

\renewcommand{\topfraction}{0.95}
\renewcommand{\bottomfraction}{0.95}
\renewcommand{\textfraction}{0.05}
\renewcommand{\floatpagefraction}{0.35}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Size settings: text, header and footer, marigins
%%  for documents based on memoir class
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength{\headsep}{10pt} 
\setlength{\headheight}{13.6pt} % baselineskip for 11pt font, i.e. \small, equals 13.6pt
\setlength{\footskip}{\headsep+\headheight}
\setlength{\uppermargin}{\headheight+\headsep+1cm}
\setlength{\textheight}{\paperheight-\uppermargin-\footskip-1.5cm}
\setlength{\textwidth}{\paperwidth-5cm}
\setlength{\spinemargin}{2.5cm}
\setlength{\foremargin}{2.5cm}
\setlength{\marginparsep}{2mm}
\setlength{\marginparwidth}{2.3mm}
%\settrimmedsize{297mm}{210mm}{*}
%\settrims{0mm}{0mm}	
\checkandfixthelayout[fixed] % needed to fix the layout
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Settings related to the interline spaces, indentations, distances
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\linespread{1}
%\linespread{1.241}
\setlength{\parindent}{14.5pt}

\setlength{\cftbeforechapterskip}{0pt} % white space in the table of contents before a chapter, works in correlation with: 
\renewcommand{\aftertoctitle}{\afterchaptertitle\vspace{-4pt}} % what needs to be changed so that the text in the table of contents starts at the same height as in other tables 

%\cftsetindents{section}{1.5em}{2.3em}

%\setbeforesecskip{10pt plus 0.5ex}%{-3.5ex \@plus -1ex \@minus -.2ex}
%\setaftersecskip{10pt plus 0.5ex}%\onelineskip}
%\setbeforesubsecskip{8pt plus 0.5ex}%{-3.5ex \@plus -1ex \@minus -.2ex}
%\setaftersubsecskip{8pt plus 0.5ex}%\onelineskip}
%\setlength\floatsep{6pt plus 2pt minus 2pt} 
%\setlength\intextsep{12pt plus 2pt minus 2pt} 
%\setlength\textfloatsep{12pt plus 2pt minus 2pt} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Packages and commands used only to contain information about the commands and fonts used in this template.
%% They are not normally needed. Please comment out the following declarations while editing the work !!!! 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{memlays}     % extra layout diagrams, used only in template for 'debugging'. Is uses layouts package. 
%\usepackage{layouts}
\usepackage{printlen} % allows displeying the values of defined lengths, used onlu in template for 'debugging'. 
\uselengthunit{pt}
\makeatletter
\newcommand{\showFontSize}{\f@size pt} % macro that prints the size of the current font 
\makeatother
% if you wish to show the frames:
%\usepackage{showframe} 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Enumerated lists definitions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Item lists have, by default, the bullets which are charactes not existing in the set of tgtermes fonts
% Therefore these are substituted by LaTeX with characters from standard set of fonts. In order to change this
% behavior you cad declare substitutions as below
%    \DeclareTextCommandDefault{\textbullet}{\ensuremath{\bullet}}
%    \DeclareTextCommandDefault{\textasteriskcentered}{\ensuremath{\ast}}
%    \DeclareTextCommandDefault{\textperiodcentered}{\ensuremath{\cdot}}
% But the better way is to redefine enumitem environment from enumitem package
\usepackage{enumitem}
\setlist{noitemsep,topsep=4pt,parsep=0pt,partopsep=4pt,leftmargin=*} % this makes list more compact
\setenumerate{labelindent=0pt,itemindent=0pt,leftmargin=!,label=\arabic*.} % it is possible to use \arabic or \alph, if the enumerations are supposed to be rendered with different numbers
\setlistdepth{4} % limits the depth of nested enumeration
\setlist[itemize,1]{label=$\bullet$}  % here we define the bullet at each of the levels
\setlist[itemize,2]{label=\normalfont\bfseries\textendash}
\setlist[itemize,3]{label=$\ast$}
\setlist[itemize,4]{label=$\cdot$}
\renewlist{itemize}{itemize}{4}

%%%http://tex.stackexchange.com/questions/29322/how-to-make-enumerate-items-align-at-left-margin
%\renewenvironment{enumerate}
%{
%\begin{list}{\arabic{enumi}.}
%{
%\usecounter{enumi}
%%\setlength{\itemindent}{0pt}
%%\setlength{\leftmargin}{1.8em}%{2zw} % 
%%\setlength{\rightmargin}{0zw} %
%%\setlength{\labelsep}{1zw} %
%%\setlength{\labelwidth}{3zw} % 
%\setlength{\topsep}{6pt}%
%\setlength{\partopsep}{0pt}%
%\setlength{\parskip}{0pt}%
%\setlength{\parsep}{0em} % 
%\setlength{\itemsep}{0em} % 
%%\setlength{\listparindent}{1zw} % 
%}
%}{
%\end{list}
%}

\makeatletter
\renewenvironment{quote}{
	\begin{list}{}
	{
	\setlength{\leftmargin}{1em}
	\setlength{\topsep}{0pt}%
	\setlength{\partopsep}{0pt}%
	\setlength{\parskip}{0pt}%
	\setlength{\parsep}{0pt}%
	\setlength{\itemsep}{0pt}
	}
	}{
	\end{list}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Package for index generation 
%% (must be set before hyperref)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%\DisemulatePackage{imakeidx} % uncomment it out if you wish to generate an index
%%\usepackage[makeindex,noautomatic]{imakeidx} % here we say that the index can not be generated automatically
%
%\makeatletter
%%%%\renewenvironment{theindex}
							 %%%%{\vskip 10pt\@makeschapterhead{\indexname}\vskip -3pt%
								%%%%\@mkboth{\MakeUppercase\indexname}%
												%%%%{\MakeUppercase\indexname}%
								%%%%\vspace{-3.2mm}\parindent\z@%
								%%%%\renewcommand\subitem{\par\hangindent 16\p@ \hspace*{0\p@}}%%
								%%%%\phantomsection%
								%%%%\begin{multicols}{2}
								%%%%%\thispagestyle{plain}
								%%%%\parindent\z@                
								%%%%%\parskip\z@ \@plus .3\p@\relax
								%%%%\let\item\@idxitem}
							 %%%%{\end{multicols}\clearpage}
%%%%
%\makeatother


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Metadata issues in the resulting pdf, hyperlinks, etc.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% The template was prepared mainly for pdflatex. PDF compilation specific commands inserted
% in the conditional statement provided by the ifpdf package 
\usepackage{ifpdf}
%\newif\ifpdf \ifx\pdfoutput\undefined
%\pdffalse % we are not running PDFLaTeX
%\else
%\pdfoutput=1 % we are running PDFLaTeX
%\pdftrue \fi
\ifpdf
 \usepackage{datetime} % package for date manipulations  
 \usepackage[pdftex,bookmarks,breaklinks,unicode]{hyperref}
 \usepackage[pdftex]{graphicx}
 \DeclareGraphicsExtensions{.pdf,.jpg,.mps,.png}
\pdfcompresslevel=9
\pdfoutput=1
\makeatletter
\AtBeginDocument{  % Here are the metadata that will be embedded in the resulting pdf. Please fill in them correctly
  \hypersetup{
	pdfinfo={
    Title = {\@title},
    Author = {\@author},
    Subject={},
    Keywords={.NET, Task Parallel Library, parallelism, multithreading, benchmarking},  
		Producer={}, 
	  CreationDate= {}, % according to the syntax: {D: yyyymmddhhmmss}, e.g. D: 20210208175600 
    ModDate={D:\pdfdate},   % modification date will be the build date 
		Creator={pdftex},
	}}
}		
\pdftrailerid{} %Remove ID
\pdfsuppressptexinfo15 %Suppress PTEX.Fullbanner and info of imported PDFs

\makeatother
\else           % if the compilation is not pdflatex 
\usepackage{graphicx}
\DeclareGraphicsExtensions{.eps,.ps,.jpg,.mps,.png}
\fi
\sloppy

\def\UrlBreaks{\do\/\do-\do_} % to break urls better 

%\graphicspath{{figures01/}{figures02/}} %% if you wish to set the paths to figures, but it is not recommended

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Format the document
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% INFO: Declaration of the numbering depth 
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}
\setsecnumdepth{subsection} 
% dots aftes sections numbers
\makeatletter
\def\@seccntformat#1{\csname the#1\endcsname.\quad}
\def\numberline#1{\hb@xt@\@tempdima{#1\if&#1&\else.\fi\hfil}}
\makeatother
% chapter numbers and separators
\renewcommand{\chapternumberline}[1]{#1.\quad}
\renewcommand{\cftchapterdotsep}{\cftdotsep}

% Fonts in figures and tables captions
\captionnamefont{\small}
\captiontitlefont{\small}
% macro adjusting the way the chapter title is rendered
%\def\printchaptertitle##1{\fonttitle \space \thechapter.\space ##1} 

% Redefinitions of labels for tables, figures and bibliography 
%\AtBeginDocument{% 
        \addto\captionsenglish{% 
        \renewcommand{\tablename}{Tab.}% 
}%} 

%\AtBeginDocument{% 
%        \addto\captionspolish{% 
%        \renewcommand{\chaptername}{Rozdzia³}% 
%}} 

%\AtBeginDocument{% 
        \addto\captionsenglish{% 
        \renewcommand{\figurename}{Fig.}% 
}%}


%\AtBeginDocument{% 
        \addto\captionsenglish{% 
        \renewcommand{\bibname}{References}% 
}%}

%\AtBeginDocument{% 
        \addto\captionsenglish{% 
        \renewcommand{\listfigurename}{List of figures}% 
}%}

%\AtBeginDocument{% 
        \addto\captionsenglish{% 
        \renewcommand{\listtablename}{List of tables}% 
}%}

%\AtBeginDocument{% 
        \addto\captionsenglish{% 
\renewcommand\indexname{Index}
}%}

%\AtBeginDocument{% 
    \addto\captionspolish{
\renewcommand\abstractname{Streszczenie} % not really needed because for Polish language by default it is 'Streszczenie'
}%}

%\AtBeginDocument{% 
    \addto\captionsenglish{
\renewcommand\abstractname{Abstract} % not really needed because for English language by default it is 'Abstract'
}%}

\renewcommand{\abstractnamefont}{\normalfont\Large\bfseries}
\renewcommand{\abstracttextfont}{\normalfont}

\newcommand\mykeywords[1]{\hspace{\absleftindent}
       \iflanguage{polish}{
			\textbf{S³owa kluczowe:} #1}{%
			  \iflanguage{english}{{\textbf{Keywords:} #1}}{}}
				}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%             
%% Definition of headers and footers appearing on pages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%                  
\addtopsmarks{headings}{%
\nouppercaseheads % added at the beginning
}{%
\createmark{chapter}{both}{shownumber}{}{. \space}
%\createmark{chapter}{left}{shownumber}{}{. \space}
\createmark{section}{right}{shownumber}{}{. \space}
}%use the new settings

\makeatletter
\copypagestyle{outer}{headings}
\makeoddhead{outer}{}{}{\small\itshape\rightmark}
\makeevenhead{outer}{\small\itshape\leftmark}{}{}
\makeoddfoot{outer}{\small\@author:~\@titleShort}{}{\small\thepage}
\makeevenfoot{outer}{\small\thepage}{}{\small\@author:~\@title}
\makeheadrule{outer}{\linewidth}{\normalrulethickness}
\makefootrule{outer}{\linewidth}{\normalrulethickness}{2pt}
\makeatother

% fix plain
\copypagestyle{plain}{headings} % overwrite plain with outer
\makeoddhead{plain}{}{}{} % remove right header
\makeevenhead{plain}{}{}{} % remove left header
\makeevenfoot{plain}{}{}{}
\makeoddfoot{plain}{}{}{}

\copypagestyle{empty}{headings} % overwrite plain with outer
\makeoddhead{empty}{}{}{} % remove right header
\makeevenhead{empty}{}{}{} % remove left header
\makeevenfoot{empty}{}{}{}
\makeoddfoot{empty}{}{}{}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Definition of title page
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
% University
\newcommand\uczelnia[1]{\renewcommand\@uczelnia{#1}}
\newcommand\@uczelnia{}
% Faculty
\newcommand\wydzial[1]{\renewcommand\@wydzial{#1}}
\newcommand\@wydzial{}
% Field
\newcommand\kierunek[1]{\renewcommand\@kierunek{#1}}
\newcommand\@kierunek{}
% Speciality
\newcommand\specjalnosc[1]{\renewcommand\@specjalnosc{#1}}
\newcommand\@specjalnosc{}
% Title in english
\newcommand\titleEN[1]{\renewcommand\@titleEN{#1}}
\newcommand\@titleEN{}
% Short title (used in headers/footers
\newcommand\titleShort[1]{\renewcommand\@titleShort{#1}}
\newcommand\@titleShort{}
% Supervisor
\newcommand\promotor[1]{\renewcommand\@promotor{#1}}
\newcommand\@promotor{}

%\usepackage[absolute]{textpos} % not used because picture environment was applied

\def\maketitle{%
  \pagestyle{empty}%
%%\garamond 
	\fontfamily{\ebgaramond@family}\selectfont % title page must be typed in garamond font
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
%% Below there is a declaration of picture including title and author text.
%% This text must be placed inside a 110mmx75mm window, whose upper left corner
%% is located at 77mm from the left and 111mm from the top of the page border
%% (the cover of the thesis has a window cutted in it just of this size). 
%% Plese check if the title and the author are really correclty placed.
%% In case of bad fitting please adjust attributes of the commands used
%% to put the window in a correct place.
%%
%% The color cover (with cutted window) should be available from administration
%% Please notice, that this cover is a bit bigger that A4 page by 3mm. Cutt these
%% margins to make the cover of the same size as the page
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
\newlength{\tmpfboxrule}
\setlength{\tmpfboxrule}{\fboxrule}
\setlength{\fboxsep}{2mm}
\setlength{\fboxrule}{0mm} 
%\setlength{\fboxrule}{0.1mm} %% uncomment if you with to see the frame
\setlength{\unitlength}{1mm}
\begin{picture}(0,0)
\put(44,-129){\fbox{
\parbox[c][71mm][c]{104mm}{\centering%\lineskip=34pt 
\fontsize{16pt}{18pt}\selectfont \@titleEN\\[5mm]
\fontsize{16pt}{18pt}\selectfont \@title\\[15mm]
\fontsize{16pt}{18pt}\selectfont AUTHOR:\\[2mm]
\fontsize{14pt}{16pt}\selectfont \@author}
}
}
\end{picture}
\setlength{\fboxrule}{\tmpfboxrule} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% The rest of the page with the name of the university, faculty, major, specialty
%% promoter, job grade, city and year 
	{\centering%\vspace{-1cm}
		{\fontsize{22pt}{24pt}\selectfont \@uczelnia}\\[0.4cm]
		{\fontsize{22pt}{24pt}\selectfont \@wydzial}\\[0.5cm]
		  \hrule %\vspace*{0.7cm}
	}
{\flushleft\fontsize{14pt}{16pt}\selectfont%
\begin{tabular}{ll}
FIELD: & \@kierunek\\
SPECIALIZATION: & \@specjalnosc\\
\end{tabular}\\[1.3cm]
}
{\centering
{\fontsize{32pt}{36pt}\selectfont MASTER}\\[0.5cm]
{\fontsize{32pt}{36pt}\selectfont THESIS}\\[2.5cm]
}
\vfill
\begin{tabularx}{\linewidth}{p{6cm}l}
		&{\fontsize{16pt}{18pt}\selectfont SUPERVISOR:}\\[2mm] 
		&{\fontsize{14pt}{16pt}\selectfont \@promotor}\\[10mm]
%		&{\fontsize{16pt}{18pt}\selectfont GRADE:}\\[20mm]
% The GRADE part can be removed, if the work is to be delivered without the supervisor's signature (in the pandemic era)
% So instead of the row defined above you can enter:
   &{\fontsize{16pt}{18pt}\selectfont }\\[20mm]
	\end{tabularx}
\vspace{2cm}
\hrule\vspace*{0.3cm}
{\centering
{\fontsize{16pt}{18pt}\selectfont \@date}\\[0cm]
}
%\ungaramond
\normalfont
 \cleardoublepage
}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\AtBeginDocument{\addtocontents{toc}{\protect\thispagestyle{empty}}}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Thesis metadata 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{Zastosowanie technik programowania wspó³bie¿nego do optymalizacji algorytmów i oprogramowania na platformie .NET}
\titleShort{Application of concurrent programming techniques to optimize ...}
\titleEN{Application of concurrent programming techniques to optimize algorithms and software on the .NET platform}
\author{Miko³aj Banaszkiewicz}
\uczelnia{WROC£AW UNIVERSITY OF SCIENCE AND TECHNOLOGY}
\wydzial{FACULTY OF ELECTRONICS}
\kierunek{INFORMATICS}
\specjalnosc{INTERNET ENGINEERING}
\promotor{PhD, Tomasz Kubik, K30W04D03}
\date{WROC£AW, 2021}

% Setting the space above nonnumbered chapters and list: ToC, LoT, LoF, Index
% Spis treœci, Spis tabel, Spis rysunków, Indeks rzeczowy

%\newlength{\linespace}
%\setlength{\linespace}{-\beforechapskip-\topskip+\headheight+\topsep}
%\makechapterstyle{noNumbered}{%
%\renewcommand\chapterheadstart{\vspace*{\linespace}}
%}

%% powy¿sza komenda za³atwia to, co robi¹ komendy poni¿sze dla spisów
%\renewcommand*{\tocheadstart}{\vspace*{\linespace}}
%\renewcommand*{\lotheadstart}{\vspace*{\linespace}}
%\renewcommand*{\lofheadstart}{\vspace*{\linespace}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                  Beginning of the document 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% You can use \includeonly{} command to select document parts (latex code files) to be compiled.
% This is especially useful when working with large documents.
% Because of fewer parts to process the compilation can speeds up.
% Please do not confuse this command with \include{} which is used to declare document parts (latex code files). 

%\includeonly{abbreviations,chapter01}  

\begin{document}
% Here you have the commands for setting the spacying (do not change)
%\SingleSpacing
%\OnehalfSpacing
%\DoubleSpacing

%\settypeoutlayoutunit{cm} % for debbuging
%\typeoutstandardlayout    % prints on stdout the info about settings

%\frontmatter
\pdfbookmark[0]{Title}{Tytul.1}
\maketitle
\clearpage

%\chapterstyle{noNumbered} 
% Below there are declarations of various lists. Please comment out those which are too short (the list should contain at least 5 items)
\pagestyle{outer}
\include{abstract} 
\clearpage
\pdfbookmark[0]{Table of contents}{spisTresci.1}
%%\phantomsection
%%\addcontentsline{toc}{chapter}{Table of contents}
\tableofcontents* 
\clearpage
\pdfbookmark[0]{List of figures}{spisRysunkow.1}
%%\phantomsection
%%\addcontentsline{toc}{chapter}{List of figures}
\listoffigures*
\clearpage
\pdfbookmark[0]{List of tables}{spisTabel.1}
%%\phantomsection
%%\addcontentsline{toc}{chapter}{List of tables}
\listoftables*
\clearpage
\pdfbookmark[0]{List of listings}{spisListingow.1} %
%%\phantomsection
%%\addcontentsline{toc}{chapter}{List of listings}
\lstlistoflistings*
\clearpage
\include{abbreviations} % If abbreviations list is short, you can comment it out

%\mainmatter
\chapterstyle{default}
\include{chapter01}
\include{chapter02}
\include{chapter03}
\include{chapter04}
\include{chapter05}
\include{chapter06}
\include{chapter07}

%\bibliographystyle{plalpha}
\bibliographystyle{abbrv}
% \bibliographystyle{plain}

%Warning: References should be collected in a separate file. You can use the programm JabRef for editing. 
%         But please remember, that not all JabRef types of entries are supported by BibTeX.
%         File name below is given without extenion 
%         (here BibTeX will look for "bibiography.bib" in the main directory)
\setlength{\bibitemsep}{2pt} % introduced to make smaller seps between bibliographic items
\bibliography{bibliography}
\appendix
\include{appendixA}
\include{appendixB}

%%Uncomment the lines below, if you want to use index
%%\chapterstyle{noNumbered}
%%\phantomsection 
%%\addcontentsline{toc}{chapter}{Index}
%%\printindex

\end{document}
